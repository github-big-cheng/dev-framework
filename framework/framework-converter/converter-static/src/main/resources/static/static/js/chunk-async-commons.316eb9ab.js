(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-async-commons"],{"3c7c":function(e,t,s){},"3c91":function(e,t,s){"use strict";s("b6cc")},"4ce2":function(e,t,s){"use strict";s.r(t);var i=s("4ec3"),a=s("7c68");const l=window.location.origin;var n={components:{foldTree:a.a},props:{select:{type:Object,default:()=>({})},apiurl:{type:String,default:()=>""},params:{type:Object,default:()=>{}},type:{type:String,default:()=>""},firstIcon:{type:String,default:()=>"el-icon-alistructure"},secondIcon:{type:String,default:()=>"el-icon-alifolder-open"},thirdIcon:{type:String,default:()=>"el-icon-alihead"},dialogVisible:{type:Boolean,default:()=>!1},renderType:{type:String,default:""},searchValue:{type:String,default:""},isActived:{type:Boolean,default:!1}},data(){return{tabName:"organization",organizationList:[],organizationValue:"",showSearchZz:!1,allOrganizationList:[],searchOrganizationList:[],selectedPerson:{},zzIndex:null,renderPerson:"partyPerson"==this.renderType||"deptPerson"==this.renderType,url:l,singleLoading:!0}},watch:{dialogVisible(e){e&&this.getOrganizationList()},organizationValue(e){e||(this.showSearchZz=!1,this.zzIndex=null)},selectedPerson(e){this.$emit("selected",{key:[this.type],value:e})},isActived(e){e&&this.searchValue.trim()?(this.organizationValue=this.searchValue,this.filterData()):(this.organizationValue="",this.showSearchZz=!1)}},created(){this.getOrganizationList()},mounted(){this.$nextTick(()=>{this.$refs.touchFocus.focus()})},computed:{dfCheckedKeys(){return this.select&&this.select.id?[Number(this.select.id)]:[]},keyName(){return this.renderPerson?"personName":"name"}},methods:{selectedZzClick(e){this.selectedPerson=e,this.$emit("dbSelected",{key:[this.type],value:e})},handleSelectedZz(e,t){this.zzIndex=e,this.selectedPerson=t},handleClickNode(e){this.selectedPerson=e},filterData(){this.searchOrganizationList=this.allOrganizationList.filter(e=>(e.keyName=this.transName(this.organizationValue,e[this.keyName]),-1!=e[this.keyName].indexOf(this.organizationValue))),this.showSearchZz=!0,this.$emit("update:searchValue",this.organizationValue)},transName(e,t){new RegExp(e,"g");return`<span>${t=t.replace(e,`<label style="color: #fa8c16 !important;">${e}</label>`)}<span>`},getOrganizationList(){i.a[this.apiurl](this.params).then(e=>{if(0==e.code){let t=this.renderPerson?this.$formatTree(e.data,"listPerson",!0,this.secondIcon,this.thirdIcon,"",!0):this.$formatTree(e.data,"listPerson",!0,this.secondIcon,this.thirdIcon);if(t.forEach(e=>{e.icon=this.firstIcon}),this.organizationList=t,this.allOrganizationList=this.renderPerson?this.$filterAll(t):this.$filterOrgAll(t),this.select&&this.select.id){const e=this.allOrganizationList.findIndex(e=>e.id==this.select.id);if(e>-1){const t=this.allOrganizationList[e];this.zzIndex=e,this.selectedPerson=t,this.$emit("selected",{key:[this.type],value:this.selectedPerson})}}this.formatDisabled()}setTimeout(()=>{this.singleLoading=!1},300)}).catch(()=>setTimeout(()=>{this.singleLoading=!1},500))},formatDisabled(){setTimeout(()=>{document.getElementsByClassName("is-disabled").forEach(e=>{e.parentNode.style.background="#fff",e.parentNode.style.color="#ccc"})},0)}}},r=(s("5aee"),s("2877")),o=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.singleLoading,expression:"singleLoading"}],staticClass:"personal-single",attrs:{"element-loading-text":"努力加载中","element-loading-spinner":"el-icon-loading"}},[t("div",{staticClass:"dv-organization"},[t("fold-tree",{directives:[{name:"show",rawName:"v-show",value:!e.showSearchZz,expression:"!showSearchZz"}],ref:"zzTree",style:{visibility:e.singleLoading?"hidden":""},attrs:{label:"name",labelTwo:"personName",selectType:"personName",treeList:e.organizationList,dfCheckedKeys:e.dfCheckedKeys},on:{clickNode:e.handleClickNode,nodeExpand:e.formatDisabled,dbSelected:e.selectedZzClick}}),t("el-input",{ref:"touchFocus",staticClass:"search-ipt",attrs:{clearable:"",placeholder:"请输入关键字搜索"},on:{input:e.filterData},model:{value:e.organizationValue,callback:function(t){e.organizationValue="string"==typeof t?t.trim():t},expression:"organizationValue"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-alisearch"},slot:"append"})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showSearchZz,expression:"showSearchZz"}],staticClass:"s-list"},e._l(e.searchOrganizationList,(function(s,i){return t("div",{key:s.id,class:e.zzIndex==i?"s-item is-selected ":"s-item",style:{height:e.renderPerson?"48px":"30px"},on:{click:function(t){return e.handleSelectedZz(i,s)},dblclick:function(t){return e.selectedZzClick(s)}}},[e.renderPerson?t("div",{staticClass:"renderPerson"},[t("div",{staticClass:"item-user"},[e.renderPerson&&s.imgPath?t("span",{style:{color:s.isDisabled?"#ccc":"#E5E5E5"}},[t("img",{staticClass:"tuser-avatar",attrs:{src:e.url+"/file"+s.imgPath}})]):e._e(),e.renderPerson&&!s.imgPath?t("span",{staticClass:"el-icon-aliuser default-avatar",style:{color:s.isDisabled?"#ccc":"#E5E5E5"}}):e._e()]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s.keyName)}}),t("div",{staticClass:"i-dept",style:{color:s.isDisabled?"#ccc":"#999"}},[e._v(" "+e._s(s.defDeptName)+" ")])])]):t("div",{staticClass:"noRenderP"},[t("div",{staticClass:"item-user"},[t("i",{class:e.firstIcon,style:{color:s.isDisabled?"#ccc":"#E5E5E5"}})]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s.keyName)}})])]),t("i",{directives:[{name:"show",rawName:"v-show",value:e.zzIndex==i,expression:"zzIndex == index"}],staticClass:"el-icon-alipitchon"})])})),0)],1)])}),[],!1,null,"2c9060f0",null);t.default=o.exports},"59da":function(e,t,s){},"5aee":function(e,t,s){"use strict";s("cfb7")},"618b":function(e,t,s){"use strict";s.r(t);var i=s("2ef0"),a=s.n(i),l=s("b775"),n={data:()=>({urlArr:[],url:"",items:[],formData:{},responseData:{}}),props:["entity"],watch:{entity:{handler(e){e.extendField&&e.extendField.url&&(this.urlArr=a.a.split(e.extendField.url,","),this.url=this.urlArr[0]||""),this.items=e.send},deep:!0}},rules:{url:[{required:!0,message:"请选择请求路径"}]},methods:{textareaInput(e){},generateRules(){this.items&&this.items.length},onSubmit(){if(!this.url)return void this.$showWarning("请选择请求地址！");let e,t=this.url;if(/{[\S\s]+}/.test(this.url)){e=this.url.match(/\{[^\}]+\}/)[0],e=e.substr(1,e.length-2).trim();let s=this.formData[e];t=this.url.replace(/{[\S\s]+}/,s)}let s=this.$loadBaseUrl()+t;this.$refs.from.validate(e=>{if(!e)return!1;l.a.post(s,this.formData).then(e=>{this.responseData=e||{}})})}}},r=(s("3c91"),s("2877")),o=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"div-main"},[t("el-form",{ref:"from",attrs:{"label-position":"right","label-width":"80px",model:e.formData}},[t("el-form-item",{attrs:{label:"请求路径"}},[t("el-select",{attrs:{lable:"请求路径"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},e._l(e.urlArr,(function(e,s){return t("el-option",{key:s,attrs:{label:e,value:e}})})),1)],1),e.items.length?e._l(e.items,(function(s){return t("el-form-item",{key:s.key,attrs:{label:s.desc+"("+s.name+")",prop:s.name,rules:[{required:s.required,message:"请输入参数"+s.name,trigger:["blur","change"]}]}},["Integer"==s.type||"Decimal"==s.type?t("el-input",{attrs:{type:"number",autosize:"",min:s.min,max:s.max,"controls-position":"right",placeholder:s.notes||s.desc},model:{value:e.formData[s.name],callback:function(t){e.$set(e.formData,s.name,e._n(t))},expression:"formData[item.name]"}}):s.extendField.scpoe?t("el-select",{model:{value:e.formData[s.name],callback:function(t){e.$set(e.formData,s.name,t)},expression:"formData[item.name]"}},e._l(s.extendField.scpoe.split(","),(function(e,s){return t("el-option",{key:s,attrs:{label:e,value:e}})})),1):"DecimalString"==s.type?t("el-input-number",{attrs:{"controls-position":"right",precision:s.scale,min:s.min,max:s.max,placeholder:s.notes||s.desc},model:{value:e.formData[s.name],callback:function(t){e.$set(e.formData,s.name,t)},expression:"formData[item.name]"}}):"String"==s.type?t("el-input",{attrs:{"controls-position":"right",placeholder:s.notes||s.desc},model:{value:e.formData[s.name],callback:function(t){e.$set(e.formData,s.name,t)},expression:"formData[item.name]"}}):"List"==s.type||"JsonString"==s.type?t("el-input",{attrs:{type:"textarea",maxlength:s.maxLength,placeholder:s.notes||s.desc},on:{input:function(t){return e.textareaInput(s)}},model:{value:e.formData[s.name],callback:function(t){e.$set(e.formData,s.name,t)},expression:"formData[item.name]"}}):e._e()],1)})):e._e(),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),t("br"),t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-col",{attrs:{span:24}},[e._v(" 所有入参: "),t("json-viewer",{attrs:{value:e.formData,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1)],1),t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-col",{attrs:{span:24}},[e._v(" 所有出参: "),t("json-viewer",{attrs:{value:e.responseData,"expand-depth":5,copyable:"",boxed:"",sort:""}})],1)],1)],2)],1)}),[],!1,null,"e769cbb6",null);t.default=o.exports},"7c68":function(e,t,s){"use strict";s("13d5"),s("4328");let i=1e4;var a={props:{treeList:{type:Array,default:()=>[]},showCheckbox:{type:Boolean,default:()=>!1},showEdit:{type:Boolean,default:()=>!1},label:{type:String,default:()=>"label"},labelTwo:{type:String,default:()=>"label"},highlight:{type:Boolean,default:()=>!0},dfCheckedKeys:{type:Array,default:()=>[]},disabledData:{type:Array,default:()=>[]},strictly:{type:Boolean,default:()=>!1},selectType:{type:String,default:()=>""},keys:{type:String,default:""}},data(){return{props:{label:(e,t)=>e[this.label]?e[this.label]:e[this.labelTwo],disabled:(e,t)=>-1!=this.disabledData.indexOf(e.id)},url:"",selecteds:[],menuIds:"",expandedKey:[123456789],currentNodeKey:0==this.dfCheckedKeys.length?"":Number(this.dfCheckedKeys[0]),visible:!0}},computed:{defaultExpandedKeys(){const e=0==this.dfCheckedKeys.length?this.expandedKey:this.dfCheckedKeys.reduce((e,t)=>(e.push(t),Number(t)==t&&e.push(Number(t)),e),[]);return this.currentNodeKey=0==this.dfCheckedKeys.length?"":Number(this.dfCheckedKeys[0]),e}},watch:{menuIds(e){this.selecteds=e.split(",")},defaultExpandedKeys:{handler(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.refreshRoot()},deep:!0,immediate:!0},treeList:{handler(e,t){if(e&&e.length&&(0==this.expandedKey.length||1===this.expandedKey.length&&this.expandedKey.includes(123456789))){const t=e[0].id;this.expandedKey.push(t)}},deep:!0,immediate:!0}},created(){this.url=window.location.origin},methods:{refreshRoot(){this.visible=!1,this.$nextTick(()=>{this.visible=!0})},handleDblClick(e){this.$emit("dbSelected",e)},append(e,t){e.stopPropagation();const s={id:i++,label:"testtest",isoperation:!1,children:[]};t.children||this.$set(t,"children",[]),t.children.push(s)},remove(e,t,s){e.stopPropagation();const i=t.parent,a=i.data.children||i.data,l=a.findIndex(e=>e.id===s.id);a.splice(l,1)},change(e,t,s){e.stopPropagation()},mouseclick(e){this.showEdit&&this.formatTrees(this.treeList,e.id)},formatTrees(e,t){return e.forEach(e=>{e.id==t?e.isoperation=!e.isoperation:e.isoperation=!1,e.children&&this.formatTrees(e.children,t)}),e},handleNodeClick(e){const t=Object.assign({},e);this.$emit("clickNode",t)},getChecked(e,t,s){let i;i=this.strictly?this.$refs.tree.getCheckedKeys().join(","):this.getCheckedKeys(this.treeList,this.$refs.tree.getCheckedKeys(),"id").join(","),this.menuIds=i,this.$emit("getChecked",{menuIds:i})},getCheckedKeys(e,t,s){var i=[];return function e(a,l){for(var n=[],r=0;r<a.length;r++){var o=a[r];n[r]=!1,o.children&&(n[r]=!!e(o.children,!0)||n[r],n[r]&&i.push(o[s]));for(var c=0;c<t.length;c++)if(o[s]==t[c]){n[r]=!0,-1==i.indexOf(o[s])&&i.push(o[s]);break}}if(l)return-1!=n.indexOf(!0)}(e,!1),i},handleSetCurrentKey(e){this.$refs.tree.setCurrentKey(e)},handleClearSelectTree(){this.$refs.tree.setCheckedKeys([])},setCheckedNodes(e){this.$refs.tree.setCheckedKeys(e)},handleNodeExpand(){this.$emit("nodeExpand")}}},l=(s("7dca"),s("2877")),n=Object(l.a)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree-box"},[e.visible?t("el-tree",{ref:"tree",staticClass:"tree-list-box",attrs:{data:e.treeList,"node-key":"id","show-checkbox":e.showCheckbox,props:e.props,"highlight-current":e.highlight,"expand-on-click-node":!1,"default-checked-keys":e.dfCheckedKeys,"default-expanded-keys":e.defaultExpandedKeys,"current-node-key":e.currentNodeKey,"check-strictly":e.strictly,accordion:""},on:{"node-click":e.handleNodeClick,"check-change":e.getChecked,"node-expand":e.handleNodeExpand},scopedSlots:e._u([{key:"default",fn:function({node:s,data:i}){return t("span",{staticClass:"custom-tree-node",on:{contextmenu:function(t){return t.preventDefault(),e.mouseclick(i)},dblclick:function(t){return t.stopPropagation(),e.handleDblClick(i)}}},[i.personName?e._e():t("i",{staticClass:"t-icon",class:i.icon}),i.personName&&i.imgPath?t("span",[t("img",{staticClass:"tuser-avatar",attrs:{src:e.url+"/file"+i.imgPath}})]):e._e(),i.personName&&!i.imgPath?t("span",{staticClass:"el-icon-aliuser default-avatar"}):e._e(),t("span",{staticClass:"tree-label",attrs:{title:s.label}},[e._v(e._s(s.label))]),e.showEdit?t("span",{directives:[{name:"show",rawName:"v-show",value:s.data.isoperation,expression:"node.data.isoperation"}]},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:t=>e.append(t,i)}},[e._v(" 添加 ")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:t=>e.remove(t,s,i)}},[e._v(" 删除 ")])],1):e._e()])}}],null,!1,1423002833)}):e._e()],1)}),[],!1,null,"7b9c1152",null);t.a=n.exports},"7d0b":function(e,t,s){"use strict";s.r(t);var i=s("b76a"),a=s.n(i),l=s("2ef0"),n=s.n(l);const r=window.location.origin;var o={components:{draggable:a.a},props:{controlData:{type:Map,default:()=>new Map},renderType:{type:String,default:""},firstIcon:{type:String,default:()=>"el-icon-alistructure"}},data(){return{selectedZzValue:"",selectedOrganization:[],selectedSearchZz:[],showselectedZz:!1,URL:r,renderPerson:"partyPerson"==this.renderType||"deptPerson"==this.renderType}},watch:{controlData:{handler(e){this.selectedOrganization=[];for(let t of e.values())!t.hasOwnProperty("isZzSelected")&&(t.isZzSelected=!1),this.selectedOrganization.push(t);if(!this.showselectedZz)return;let t=this.selectedSearchZz.filter(t=>e.get(t.id));this.selectedSearchZz=t},deep:!0},selectedZzValue(e){e||(this.showselectedZz=!1,this.selectedSearchZz=[])}},mounted(){this.$nextTick(()=>{this.$refs.touchFocus.focus()})},computed:{keyName(){return this.renderPerson?"personName":"name"},keyName2(){return this.renderPerson?"defDeptName":"code"}},methods:{filterSelectedData(){this.throttle(this.filterSearch,300)()},filterSearch(){let e=new Map,t=this.selectedZzValue;for(let[s,i]of this.controlData)-1==i[this.keyName].indexOf(t)&&-1==i[this.keyName2].indexOf(t)||(i.personName2=this.transName(t,i[this.keyName]),i.defDeptName2=this.transName(t,i[this.keyName2]),e.set(s,n.a.cloneDeep(i)));this.selectedSearchZz=Array.from(e.values()),this.showselectedZz=!0,this.$emit("update:searchValue",this.selectedZzValue)},handleSearchDbRemove(e,t){let s=this.controlData.get(e);this.selectedSearchZz.splice(t,1),this.$emit("selected",s,"del"),this.$emit("setPublicSelect",s,!1)},handleSelectedSearchZz(e,t){let s=!this.selectedSearchZz[t].isZzSelected;this.selectedSearchZz[t].isZzSelected=s,this.$emit("setPublicSelect",this.controlData.get(e),s)},transName(e,t){new RegExp(e,"g");return`<span>${t=t.replace(e,`<label style="color: #fa8c16 !important;">${e}</label>`)}<span>`},throttle(e,t){let s=0,i=null;return function(){let a=this,l=arguments,n=+new Date;n-s<t?(clearTimeout(i),i=setTimeout((function(){s=n,e.apply(a,l)}),t)):(s=n,e.apply(a,l))}},handleSelectedZz(e){let t=!this.controlData.get(e).isZzSelected;this.$emit("setPublicSelect",this.controlData.get(e),t)},handleDbRemove(e){let t=this.controlData.get(e);this.$emit("selected",t,"del"),this.$emit("setPublicSelect",t,!1)},onStart(){},onEnd(){let e=new Map;this.selectedOrganization.forEach(t=>{e.set(t.id,t)}),this.$emit("setControlData",e)}}},c=(s("aeb3"),s("2877")),d=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("el-input",{ref:"touchFocus",staticClass:"search-ipt selected-zz",attrs:{clearable:"",placeholder:"请输入关键字搜索"},on:{input:e.filterSelectedData},model:{value:e.selectedZzValue,callback:function(t){e.selectedZzValue="string"==typeof t?t.trim():t},expression:"selectedZzValue"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-alisearch"},slot:"append"})],1),t("div",{staticClass:"selected-col"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showselectedZz,expression:"!showselectedZz"}],staticClass:"s-list search-col"},[t("draggable",{attrs:{"chosen-class":"chosen","force-fallback":"true",group:"people",animation:"300",delay:"100"},on:{start:e.onStart,end:e.onEnd},model:{value:e.selectedOrganization,callback:function(t){e.selectedOrganization=t},expression:"selectedOrganization"}},[t("transition-group",e._l(e.selectedOrganization,(function(s){return t("div",{key:s.id,class:s.isZzSelected?"s-item is-selected":"s-item",style:{height:e.renderPerson?"48px":"30px"},on:{click:function(t){return e.handleSelectedZz(s.id)},dblclick:function(t){return t.stopPropagation(),e.handleDbRemove(s.id)}}},[e.renderPerson?t("div",{staticClass:"renderPerson"},[t("div",{staticClass:"item-user"},[e.renderPerson&&s.imgPath?t("span",{style:{color:s.isDisabled?"#ccc":"#E5E5E5"}},[t("img",{staticClass:"tuser-avatar",attrs:{src:e.URL+"/file"+s.imgPath}})]):e._e(),e.renderPerson&&!s.imgPath?t("span",{staticClass:"el-icon-aliuser default-avatar",style:{color:s.isDisabled?"#ccc":"#E5E5E5"}}):e._e()]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s[e.keyName])}}),t("div",{staticClass:"i-dept",style:{color:s.isDisabled?"#ccc":"#999"},domProps:{innerHTML:e._s(s[e.keyName2])}})])]):t("div",{staticClass:"noRenderP"},[t("div",{staticClass:"item-user"},[t("i",{class:e.firstIcon,style:{color:s.isDisabled?"#ccc":"#E5E5E5"}})]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s[e.keyName])}})])]),t("i",{directives:[{name:"show",rawName:"v-show",value:s.isZzSelected,expression:"item.isZzSelected"}],staticClass:"el-icon-alipitchon"})])})),0)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showselectedZz,expression:"showselectedZz"}],staticClass:"s-list search-col",staticStyle:{"z-index":"10"}},[t("draggable",{attrs:{group:"people",delay:"100",animation:"0"},on:{start:e.onStart,end:e.onEnd},model:{value:e.selectedSearchZz,callback:function(t){e.selectedSearchZz=t},expression:"selectedSearchZz"}},[t("transition-group",e._l(e.selectedSearchZz,(function(s,i){return t("div",{key:s.id,class:s.isZzSelected?"s-item is-selected ":"s-item",style:{height:e.renderPerson?"48px":"30px"},on:{click:function(t){return e.handleSelectedSearchZz(s.id,i)},dblclick:function(t){return e.handleSearchDbRemove(s.id,i)}}},[e.renderPerson?t("div",{staticClass:"renderPerson"},[t("div",{staticClass:"item-user"},[e.renderPerson&&s.imgPath?t("span",{style:{color:s.isDisabled?"#ccc":"#E5E5E5"}},[t("img",{staticClass:"tuser-avatar",attrs:{src:e.URL+"/file"+s.imgPath}})]):e._e(),e.renderPerson&&!s.imgPath?t("span",{staticClass:"el-icon-aliuser default-avatar",style:{color:s.isDisabled?"#ccc":"#E5E5E5"}}):e._e()]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s.personName2)}}),t("div",{staticClass:"i-dept",style:{color:s.isDisabled?"#ccc":"#999"},domProps:{innerHTML:e._s(s.defDeptName2)}})])]):t("div",{staticClass:"noRenderP"},[t("div",{staticClass:"item-user"},[t("i",{class:e.firstIcon,style:{color:s.isDisabled?"#ccc":"#E5E5E5"}})]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s.personName2)}})])]),t("i",{directives:[{name:"show",rawName:"v-show",value:s.isZzSelected,expression:"item.isZzSelected"}],staticClass:"el-icon-alipitchon"})])})),0)],1)],1)])],1)}),[],!1,null,"5b3296dc",null);t.default=d.exports},"7dca":function(e,t,s){"use strict";s("f23f")},"7f345":function(e,t,s){"use strict";s("59da")},"86a2":function(e,t,s){"use strict";s.r(t);var i=s("4ec3"),a=s("7c68"),l=s("2ef0"),n=s.n(l);const r=window.location.origin;var o={components:{foldTree:a.a},props:{dfSelected:{default:()=>new Map},controlData:{default:()=>new Map},workingArea:{type:Map,default:()=>new Map},dialogVisible:{type:Boolean,default:!1},params:{type:Object,default:()=>{}},tabName:{type:String,default:""},apiurl:{type:String,default:""},firstIcon:{type:String,default:()=>"el-icon-alistructure"},secondIcon:{type:String,default:()=>"el-icon-alifolder-open"},thirdIcon:{type:String,default:()=>"el-icon-alihead"},isRenderTree:{type:Boolean,default:!1},hasSerach:{type:Boolean,default:!1},showSearchArea:{type:Boolean,default:!1},type:{type:Number,default:0},searchValue:{type:String,default:""},isActived:{type:Boolean,default:!1},renderType:{type:String,default:""}},data(){return{organizationValue:"",showSearchZz:!1,organizationList:[],dfCheckedKeysZz:[],searchOrganizationList:[],loading:!1,allOrganizationList:new Map,selectTreeIds:[],URL:r,choiceLoading:!0,renderPerson:"partyPerson"==this.renderType||"deptPerson"==this.renderType}},watch:{isActived(e){e&&this.searchValue.trim()?(this.organizationValue=this.searchValue,this.filterData()):(this.organizationValue="",this.showSearchZz=!1)},organizationValue(e){e||(this.showSearchZz=!1,this.searchOrganizationList=[],this.$emit("update:hasSerach",!1))},dialogVisible:{handler(e){if(this.selectedOrganization=0,e){let e=[];for(let t of this.dfSelected)e.push(t);this.getOrganizationList(e.join())}},immediate:!0},workingArea:{handler(e){},deep:!0},isRenderTree(e){if(!e)return;let t=[],s=this.workingArea;for(let e of s.keys())t.push(e+"");this.mountedTreeSelected(t),this.dfCheckedKeysZz=t,this.$emit("update:isRenderTree",!1)}},mounted(){this.$nextTick(()=>{this.$refs.touchFocus.focus()})},computed:{keyName(){return this.renderPerson?"personName":"name"},keyName2(){return this.renderPerson?"defDeptName":"code"}},methods:{filterData(){this.throttle(this.filterSearch,300)()},filterSearch(){let e=new Map,t=this.organizationValue;for(let[s,i]of this.allOrganizationList)-1==i[this.keyName].indexOf(t)&&-1==i[this.keyName2].indexOf(t)||(i.isZzSelected=!1,this.controlData.get(s)&&(i.isZzSelected=!0),i.personName2=this.transName(t,i[this.keyName]),i.defDeptName2=this.transName(t,i[this.keyName2]),e.set(s,n.a.cloneDeep(i)));this.searchOrganizationList=Array.from(e.values()),this.showSearchZz=!0,this.$emit("update:searchValue",this.organizationValue)},handleGetChecked({menuIds:e}){this.selectTreeIds=e.split(",");let t=new Map;this.selectTreeIds.forEach(e=>{let s=this.allOrganizationList.get(Number(e));s&&t.set(Number(e),s)}),this.$emit("setWorking",t,this.allOrganizationList)},selectedZzClick(e){let t=this.setDbclick(e),s=n.a.cloneDeep(this.workingArea);if(t.size)for(let[e,i]of t)s.set(e,i);for(let e of this.workingArea.keys()){let t=this.allOrganizationList.get(Number(e));t&&t[this.keyName]&&(t.isZzSelected=!1)}this.changeSelected(s)},getOrganizationList(e){i.a[this.apiurl](this.params).then(e=>{if(0!=e.code)return void this.$showWarning("获取数据失败");let t=e.data;this.totalNum=t&&t.length>0?t[0].totalNumber:0;let s=this.renderPerson?this.$formatTree(e.data,"listPerson",!0,this.secondIcon,this.thirdIcon,"",!0):this.$formatTree(e.data,"listPerson",!0,this.secondIcon,this.thirdIcon);s.forEach((e,t)=>{e.icon=this.firstIcon}),this.organizationList=s;let i=this.renderPerson?this.$filterAll(s):this.$filterOrgAll(s),a=[];i.forEach(e=>{this.allOrganizationList.set(e.id,e),a.push(e)}),this.$emit("chekcIds",{type:this.type,obj:a}),setTimeout(()=>{this.choiceLoading=!1},300)}).catch(()=>setTimeout(()=>{this.choiceLoading=!1},300))},changeSelected(e){this.$emit("setWorking",e,this.allOrganizationList),this.$emit("selected",e,"add")},mountedTreeSelected(e){this.$refs.zzTree.setCheckedNodes(e)},handleTreeSelectedZz(e,t){let s=this.searchOrganizationList[t].isZzSelected;this.$set(this.searchOrganizationList[t],"isZzSelected",!s);let i=n.a.cloneDeep(this.workingArea);i.get(e.id)||(i.set(e.id,n.a.cloneDeep(e)),this.$emit("setWorking",i,this.allOrganizationList),this.searchOrganizationList.some(e=>e.isZzSelected)&&this.$emit("update:hasSerach",!0))},handleDbTreeSelected(e,t){let s=n.a.cloneDeep(this.workingArea);s.set(e.id,n.a.cloneDeep(e));for(let e of this.workingArea.keys()){let t=this.allOrganizationList.get(Number(e));t&&t[this.keyName]&&(t.isZzSelected=!1)}this.$set(this.searchOrganizationList[t],"isZzSelected",!0),this.$emit("setWorking",s,this.allOrganizationList),this.$emit("selected",s,"add")},throttle(e,t){let s=0,i=null;return function(){let a=this,l=arguments,n=+new Date;n-s<t?(clearTimeout(i),i=setTimeout((function(){s=n,e.apply(a,l)}),t)):(s=n,e.apply(a,l))}},setDbclick(e){let t=new Map;if(!this.renderPerson)return t.set(e.id,e),t;if(!e.hasOwnProperty("children"))return t.set(e.id,e),t;return function e(s){if(!s.hasOwnProperty("children"))return t.set(s.id,s),t;s.listPerson.forEach(e=>t.set(e.id,e)),s.children.length&&s.children.forEach(t=>{e(t)})}(e),t},transArray(e){if(!e.size)return[];let t=[];for(let s of e.values())t.push(s);return t},transMap(e){let t=new Map;return e.length?(e.forEach(e=>t.set(e.id,e)),t):t},transName(e,t){new RegExp(e,"g");return`<span>${t=t.replace(e,`<label style="color: #fa8c16 !important;">${e}</label>`)}<span>`}}},c=(s("8ed2"),s("2877")),d=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"c1"},[t("el-input",{ref:"touchFocus",staticClass:"search-ipt",attrs:{clearable:"",placeholder:"请输入关键字搜索"},on:{input:e.filterData},model:{value:e.organizationValue,callback:function(t){e.organizationValue="string"==typeof t?t.trim():t},expression:"organizationValue"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-alisearch"},slot:"append"})],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.choiceLoading,expression:"choiceLoading"}],staticClass:"dv-organization",attrs:{"element-loading-text":"努力加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 1)"}},[t("fold-tree",{directives:[{name:"show",rawName:"v-show",value:!e.showSearchZz,expression:"!showSearchZz"}],ref:"zzTree",style:{visibility:e.choiceLoading?"hidden":""},attrs:{showCheckbox:!0,treeList:e.organizationList,dfCheckedKeys:e.dfCheckedKeysZz,label:"name",labelTwo:"personName",strictly:!e.renderPerson},on:{getChecked:e.handleGetChecked,dbSelected:e.selectedZzClick}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showSearchZz,expression:"showSearchZz"}],staticClass:"s-list search-col"},e._l(e.searchOrganizationList,(function(s,i){return t("div",{key:s.id,class:s.isZzSelected?"s-item is-selected":"s-item",style:{height:e.renderPerson?"48px":"30px"},on:{click:function(t){return e.handleTreeSelectedZz(s,i)},dblclick:function(t){return e.handleDbTreeSelected(s,i)}}},[e.renderPerson?t("div",{staticClass:"renderPerson"},[t("div",{staticClass:"item-user"},[e.renderPerson&&s.imgPath?t("span",{style:{color:s.isDisabled?"#ccc":"#E5E5E5"}},[t("img",{staticClass:"tuser-avatar",attrs:{src:e.URL+"/file"+s.imgPath}})]):e._e(),e.renderPerson&&!s.imgPath?t("span",{staticClass:"el-icon-aliuser default-avatar",style:{color:s.isDisabled?"#ccc":"#E5E5E5"}}):e._e()]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s.personName2)}}),t("div",{staticClass:"i-dept",style:{color:s.isDisabled?"#ccc":"#999"},domProps:{innerHTML:e._s(s.defDeptName2)}})])]):t("div",{staticClass:"noRenderP"},[t("div",{staticClass:"item-user"},[t("i",{class:e.firstIcon,style:{color:s.isDisabled?"#ccc":"#E5E5E5"}})]),t("div",{staticClass:"item-desc"},[t("div",{staticClass:"i-name",style:{color:s.isDisabled?"#ccc":"#333"},domProps:{innerHTML:e._s(s.personName2)}})])]),t("i",{directives:[{name:"show",rawName:"v-show",value:s.isZzSelected,expression:"item.isZzSelected"}],staticClass:"el-icon-alipitchon"})])})),0)],1)],1)}),[],!1,null,"34ac38ec",null);t.default=d.exports},"8ed2":function(e,t,s){"use strict";s("3c7c")},"951d":function(e,t,s){},aeb3:function(e,t,s){"use strict";s("ce87")},b6cc:function(e,t,s){},bf46:function(e,t,s){"use strict";var i={props:{dialogVisible:{type:Boolean,default:()=>!1},width:{type:String,default:""},iconfont:{type:String,default:""},title:{type:String,default:()=>""},alignType:{type:Boolean,default:()=>!1},btnLoading:{type:Boolean,default:()=>!1},className:{type:String,default:()=>""},showTrueBtn:{type:Boolean,default:()=>!0},showCancelBtn:{type:Boolean,default:()=>!0},trueText:{type:String,default:()=>"确 定"},cancelText:{type:String,default:()=>"取 消"}},methods:{handleCancelClick(){this.$emit("cancelClick")},handleTrueClick(){this.$emit("trueClick")},beforeClose(){return this.$emit("cancelClick"),!1},closed(){this.$nextTick(()=>{this.$refs._dialog.$el.firstElementChild.removeAttribute("style")})}}},a=(s("7f345"),s("2877")),l=Object(a.a)(i,(function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"_dialog",staticClass:"dialog-box",class:e.className,attrs:{width:e.width,"append-to-body":!0,visible:e.dialogVisible,center:e.alignType,"before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closed}},[t("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t("i",{class:["iconfont",e.iconfont]}),e._v(" "),t("span",[e._v(e._s(e.title))])]),e._t("default"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.showTrueBtn?t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.handleTrueClick}},[e._v(" "+e._s(e.trueText)+" ")]):e._e(),e.showCancelBtn?t("el-button",{on:{click:e.handleCancelClick}},[e._v(e._s(e.cancelText))]):e._e()],1)],2)}),[],!1,null,"7b1eddc6",null);t.a=l.exports},bfc1:function(e,t,s){"use strict";s.r(t);var i=s("2ef0"),a=s.n(i),l={data:()=>({activeNames:"",sendSearch:"",rcvSearch:""}),props:["entity"],methods:{filter(e,t){if(!e)return t;let s=[];for(let i of t){let t=a.a.cloneDeep(i);if(t.name.toLowerCase().includes(e.toLowerCase())){s.push(t);continue}if(!t.children||0==t.children.length)continue;let l=this.filter(e,t.children);l&&l.length>0&&(t.children=l,s.push(t))}return s}}},n=(s("cbee"),s("2877")),r=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"基本信息",name:"basicInfo"}},[t("label",[e._v("接口名称:")]),e._v(" "+e._s(e.entity.name)),t("br"),t("label",[e._v("接口描述:")]),e._v(" "+e._s(e.entity.desc)),t("br"),t("label",[e._v("分组名称:")]),e._v(" "+e._s(e.entity.extendField&&e.entity.extendField.group?e.entity.extendField.group:"默认分组")),t("br"),t("label",[e._v("请求地址:")]),e._v(" "+e._s(e.entity.extendField?e.entity.extendField.url:"-")),t("br")]),t("el-collapse-item",{attrs:{title:"请求参数",name:"sendList"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filter(e.sendSearch,e.entity.send),"highlight-current-row":"","default-expand-all":!0,"row-key":"name","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(s.row.name))]),t("i",{staticClass:"is-required"},[e._v(e._s(s.row.required?"*":""))])]}}])}),t("el-table-column",{attrs:{prop:"desc",label:"描述"}}),t("el-table-column",{attrs:{prop:"type",label:"类型"}}),t("el-table-column",{attrs:{prop:"notes",label:"备注"}}),t("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(s){return[t("el-input",{attrs:{size:"mini",clearable:"",placeholder:"输入关键字搜索"},model:{value:e.sendSearch,callback:function(t){e.sendSearch=t},expression:"sendSearch"}})]}}])})],1)],1),t("el-collapse-item",{attrs:{title:"响应格式",name:"rcvList"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filter(e.rcvSearch,e.entity.rcv),"tree-props":{children:"children",hasChildren:"hasChildren"},"highlight-current-row":"","row-key":"name"}},[t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"desc",label:"描述"}}),t("el-table-column",{attrs:{prop:"type",label:"类型"}}),t("el-table-column",{attrs:{prop:"note",label:"备注"}}),t("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(s){return[t("el-input",{attrs:{size:"mini",clearable:"",placeholder:"输入关键字搜索"},model:{value:e.rcvSearch,callback:function(t){e.rcvSearch=t},expression:"rcvSearch"}})]}}])})],1)],1)],1),t("el-backtop",{attrs:{target:"#pane-basicInfo"}})],1)}),[],!1,null,"7b65c8bc",null);t.default=r.exports},cbee:function(e,t,s){"use strict";s("951d")},ce87:function(e,t,s){},cfb7:function(e,t,s){},f23f:function(e,t,s){}}]);